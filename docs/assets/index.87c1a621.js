import{S as M,i as G,s as A,C as Ne,c as d,a as $,m as h,t as p,b as y,d as b,e as le,f as Re,g as N,h as ee,j as Me,k as z,R as ae,P as R,l as D,n as E,o as B,p as Ge,q as Ae,r as X,u as Te,T as Pe,v as U,w as K,x as Fe,y as S,z as T,A as P,B as q,D as se,E as I,F as L,G as O,H as V,I as J,J as Ie,K as W,L as fe,M as Le,N as Oe,O as We,Q as He,U as H,V as oe,W as ue,X as me,Y as ce,Z as ge,_ as pe,$ as Ke}from"./vendor.74228769.js";const qe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))t(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function r(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerpolicy&&(n.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?n.credentials="include":l.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(l){if(l.ep)return;l.ep=!0;const n=r(l);fetch(l.href,n)}};qe();function Qe(a){let e,r,t,l;const n=[{width:F},{height:50},{fillColor:7829367},a[4]];let i={};for(let f=0;f<n.length;f+=1)i=ee(i,n[f]);return e=new ae({props:i}),t=new ae({props:{x:-F/2,originX:0,originY:.5,width:R.Math.Clamp(F*a[2],10,F),height:50,fillColor:12303291}}),{c(){d(e.$$.fragment),r=D(),d(t.$$.fragment)},l(f){$(e.$$.fragment,f),r=E(f),$(t.$$.fragment,f)},m(f,s){h(e,f,s),B(f,r,s),h(t,f,s),l=!0},p(f,s){const o=s&16?Ge(n,[s&0&&{width:F},n[1],n[2],s&16&&Ae(f[4])]):{};e.$set(o);const u={};s&4&&(u.width=R.Math.Clamp(F*f[2],10,F)),t.$set(u)},i(f){l||(p(e.$$.fragment,f),p(t.$$.fragment,f),l=!0)},o(f){y(e.$$.fragment,f),y(t.$$.fragment,f),l=!1},d(f){b(e,f),f&&X(r),b(t,f)}}}function je(a){let e,r;return e=new Ne({props:{x:a[0],y:a[1],width:F,height:50,$$slots:{default:[Qe]},$$scope:{ctx:a}}}),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,l){h(e,t,l),r=!0},p(t,[l]){const n={};l&1&&(n.x=t[0]),l&2&&(n.y=t[1]),l&84&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}const F=400;function ze(a,e,r){const t=["x","y","progress"];let l=le(e,t),n,{x:i}=e,{y:f}=e,{progress:s=0}=e;const o=Re(s,{duration:200,easing:Te});return N(a,o,u=>r(2,n=u)),a.$$set=u=>{e=ee(ee({},e),Me(u)),r(4,l=le(e,t)),"x"in u&&r(0,i=u.x),"y"in u&&r(1,f=u.y),"progress"in u&&r(5,s=u.progress)},a.$$.update=()=>{a.$$.dirty&32&&z(o,n=s,n)},[i,f,n,o,l,s]}class ye extends M{constructor(e){super();G(this,e,ze,je,A,{x:0,y:1,progress:5})}}function Ue(a){let e,r;return e=new Pe({props:{depth:-1,x:0,y:0,width:800,height:600,originX:0,originY:0,texture:"textures/starfield",tilePositionY:a[0]}}),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,l){h(e,t,l),r=!0},p(t,[l]){const n={};l&1&&(n.tilePositionY=t[0]),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Ve(a,e,r){let t=0;return U("step",()=>{r(0,t-=2)}),[t]}class _e extends M{constructor(e){super();G(this,e,Ve,Ue,A,{})}}function Je(a){let e,r;return e=new K({props:{x:a[0],y:a[1],depth:30,animation:a[2],scale:a[2]=="anims/ufo/explosion"?1:.75}}),e.$on("animationcomplete",a[3]),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,l){h(e,t,l),r=!0},p(t,[l]){const n={};l&1&&(n.x=t[0]),l&2&&(n.y=t[1]),l&4&&(n.animation=t[2]),l&4&&(n.scale=t[2]=="anims/ufo/explosion"?1:.75),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Ze(a,e,r){let{x:t}=e,{y:l}=e,{animation:n="anims/enemy/explosion"}=e;function i(f){Fe.call(this,a,f)}return a.$$set=f=>{"x"in f&&r(0,t=f.x),"y"in f&&r(1,l=f.y),"animation"in f&&r(2,n=f.animation)},[t,l,n,i]}class et extends M{constructor(e){super();G(this,e,Ze,Je,A,{x:0,y:1,animation:2})}}function tt(a){let e,r,t;function l(i){a[16](i)}let n={animation:a[0]==="enemyBullet"?"anims/enemyBullet/default":a[0]==="flirtyGirlBullet"?"anims/kissBullet/default":"anims/bullet/default",depth:a[3],name:a[0],texture:a[2],x:a[4],y:a[5],scale:a[0]==="flirtyGirlBullet"?.5:1,$$slots:{default:[rt]},$$scope:{ctx:a}};return a[9]!==void 0&&(n.instance=a[9]),e=new K({props:n}),I.push(()=>L(e,"instance",l)),{c(){d(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,f){h(e,i,f),t=!0},p(i,f){const s={};f&1&&(s.animation=i[0]==="enemyBullet"?"anims/enemyBullet/default":i[0]==="flirtyGirlBullet"?"anims/kissBullet/default":"anims/bullet/default"),f&8&&(s.depth=i[3]),f&1&&(s.name=i[0]),f&4&&(s.texture=i[2]),f&16&&(s.x=i[4]),f&32&&(s.y=i[5]),f&1&&(s.scale=i[0]==="flirtyGirlBullet"?.5:1),f&540610&&(s.$$scope={dirty:f,ctx:i}),!r&&f&512&&(r=!0,s.instance=i[9],O(()=>r=!1)),e.$set(s)},i(i){t||(p(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){b(e,i)}}}function nt(a){let e,r;return e=new et({props:{animation:a[13],x:a[12].x,y:a[12].y-32}}),e.$on("animationcomplete",a[14]),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,l){h(e,t,l),r=!0},p(t,l){const n={};l&8192&&(n.animation=t[13]),l&4096&&(n.x=t[12].x),l&4096&&(n.y=t[12].y-32),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function rt(a){let e,r,t,l;return e=new V({props:{with:a[1],overlapOnly:!0}}),e.$on("collide",a[15]),t=new J({props:{velocityY:a[7],velocityX:a[6]}}),{c(){d(e.$$.fragment),r=D(),d(t.$$.fragment)},l(n){$(e.$$.fragment,n),r=E(n),$(t.$$.fragment,n)},m(n,i){h(e,n,i),B(n,r,i),h(t,n,i),l=!0},p(n,i){const f={};i&2&&(f.with=n[1]),e.$set(f);const s={};i&128&&(s.velocityY=n[7]),i&64&&(s.velocityX=n[6]),t.$set(s)},i(n){l||(p(e.$$.fragment,n),p(t.$$.fragment,n),l=!0)},o(n){y(e.$$.fragment,n),y(t.$$.fragment,n),l=!1},d(n){b(e,n),n&&X(r),b(t,n)}}}function it(a){let e,r,t,l;const n=[nt,tt],i=[];function f(s,o){return s[10]?0:1}return e=f(a),r=i[e]=n[e](a),{c(){r.c(),t=S()},l(s){r.l(s),t=S()},m(s,o){i[e].m(s,o),B(s,t,o),l=!0},p(s,[o]){let u=e;e=f(s),e===u?i[e].p(s,o):(T(),y(i[u],1,1,()=>{i[u]=null}),P(),r=i[e],r?r.p(s,o):(r=i[e]=n[e](s),r.c()),p(r,1),r.m(t.parentNode,t))},i(s){l||(p(r),l=!0)},o(s){y(r),l=!1},d(s){i[e].d(s),s&&X(t)}}}function lt(a,e,r){let{name:t}=e,{target:l}=e,{texture:n}=e,{depth:i=0}=e,{x:f}=e,{y:s}=e,{velocityX:o=0}=e,{velocityY:u=0}=e,{onDestroy:_}=e,c,m=!1,C,k,x,g=q().time.addEvent({callback:()=>{m||_()},delay:3e3});se(()=>()=>g.destroy());const w=()=>_(),Z=Y=>{if(r(11,C=Y.detail.other.texture.key),C==="textures/flirty-girl")return _();r(10,m=!0),r(13,x=C.replace("textures","anims")+"/explosion"),r(12,k={x:c.x,y:c.y})};function Ee(Y){c=Y,r(9,c)}return a.$$set=Y=>{"name"in Y&&r(0,t=Y.name),"target"in Y&&r(1,l=Y.target),"texture"in Y&&r(2,n=Y.texture),"depth"in Y&&r(3,i=Y.depth),"x"in Y&&r(4,f=Y.x),"y"in Y&&r(5,s=Y.y),"velocityX"in Y&&r(6,o=Y.velocityX),"velocityY"in Y&&r(7,u=Y.velocityY),"onDestroy"in Y&&r(8,_=Y.onDestroy)},[t,l,n,i,f,s,o,u,_,c,m,C,k,x,w,Z,Ee]}class te extends M{constructor(e){super();G(this,e,lt,it,A,{name:0,target:1,texture:2,depth:3,x:4,y:5,velocityX:6,velocityY:7,onDestroy:8})}}const ne=W(0),Q=W(3),de=W(0),re=W(0),at=W(!1),j=W(!1);let ie=W({});const $e=Ie([Q,at],([a,e])=>a<=0?"gameover":e?"win":"playing"),st=()=>{ne.set(0),Q.set(3)};function ft(a){let e,r,t,l;return e=new V({props:{with:["enemy","enemyBullet","flirtyGirlBullet"],overlapOnly:!0}}),e.$on("collide",a[5]),t=new J({props:{velocityX:a[3],collideWorldBounds:!0}}),{c(){d(e.$$.fragment),r=D(),d(t.$$.fragment)},l(n){$(e.$$.fragment,n),r=E(n),$(t.$$.fragment,n)},m(n,i){h(e,n,i),B(n,r,i),h(t,n,i),l=!0},p(n,i){const f={};i&8&&(f.velocityX=n[3]),t.$set(f)},i(n){l||(p(e.$$.fragment,n),p(t.$$.fragment,n),l=!0)},o(n){y(e.$$.fragment,n),y(t.$$.fragment,n),l=!1},d(n){b(e,n),n&&X(r),b(t,n)}}}function ot(a){let e,r,t;function l(i){a[6](i)}let n={depth:10,name:"player",texture:"textures/player",x:a[1],y:a[2],$$slots:{default:[ft]},$$scope:{ctx:a}};return a[0]!==void 0&&(n.instance=a[0]),e=new K({props:n}),I.push(()=>L(e,"instance",l)),{c(){d(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,f){h(e,i,f),t=!0},p(i,[f]){const s={};f&2&&(s.x=i[1]),f&4&&(s.y=i[2]),f&1033&&(s.$$scope={dirty:f,ctx:i}),!r&&f&1&&(r=!0,s.instance=i[0],O(()=>r=!1)),e.$set(s)},i(i){t||(p(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){b(e,i)}}}const he=200;function ut(a,e,r){let t;N(a,ie,m=>r(7,t=m));let{x:l}=e,{y:n}=e,{instance:i=void 0}=e;const{spawn:f}=fe(),s=q(),o={left:s.input.keyboard.addKey("left"),right:s.input.keyboard.addKey("right"),up:s.input.keyboard.addKey("up"),shoot:s.input.keyboard.addKey("SPACE")};let u=0;U("step",()=>{t.left||o.left.isDown?r(3,u=-he):t.right||o.right.isDown?r(3,u=he):r(3,u=0),(t.A||R.Input.Keyboard.JustDown(o.shoot))&&f(te,{name:"playerBullet",texture:"textures/player/bullet",target:"enemy",depth:10,x:i.x,y:i.y-8,velocityY:-250})});const _=m=>{if(!(m.detail.self.alpha<1)){if(m.detail.other.name==="enemy"){i.setAlpha(.5);let{x:C,y:k}=i,x=s.add.sprite(C,k,"__DEFAULT");x.anims.create({key:"default",frames:s.anims.generateFrameNumbers("textures/explosion"),frameRate:24}),x.on("animationcomplete-default",()=>{x.destroy(),s.time.addEvent({delay:1e3,callback:()=>i.setAlpha(1)})}),x.play("default")}Q.update(C=>C-1)}};function c(m){i=m,r(0,i)}return a.$$set=m=>{"x"in m&&r(1,l=m.x),"y"in m&&r(2,n=m.y),"instance"in m&&r(0,i=m.instance)},[i,l,n,u,s,_,c]}class mt extends M{constructor(e){super();G(this,e,ut,ot,A,{x:1,y:2,instance:0})}}function ct(a){let e,r,t,l;return e=new J({props:{bounce:1,collideWorldBounds:!0,velocityX:Math.random()<.5?15:-15,velocityY:R.Math.Between(-5,-60),gravityY:100,useDamping:!0,circle:{radius:14,offsetX:0,offsetY:0}}}),t=new V({props:{with:"player",overlapOnly:!0}}),t.$on("collide",a[5]),{c(){d(e.$$.fragment),r=D(),d(t.$$.fragment)},l(n){$(e.$$.fragment,n),r=E(n),$(t.$$.fragment,n)},m(n,i){h(e,n,i),B(n,r,i),h(t,n,i),l=!0},p:Le,i(n){l||(p(e.$$.fragment,n),p(t.$$.fragment,n),l=!0)},o(n){y(e.$$.fragment,n),y(t.$$.fragment,n),l=!1},d(n){b(e,n),n&&X(r),b(t,n)}}}function gt(a){let e,r,t;function l(i){a[6](i)}let n={name:"coin",x:a[0],y:a[1],scale:.5,animation:"anims/coin/default",$$slots:{default:[ct]},$$scope:{ctx:a}};return a[3]!==void 0&&(n.instance=a[3]),e=new K({props:n}),I.push(()=>L(e,"instance",l)),{c(){d(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,f){h(e,i,f),t=!0},p(i,[f]){const s={};f&1&&(s.x=i[0]),f&2&&(s.y=i[1]),f&132&&(s.$$scope={dirty:f,ctx:i}),!r&&f&8&&(r=!0,s.instance=i[3],O(()=>r=!1)),e.$set(s)},i(i){t||(p(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){b(e,i)}}}function pt(a,e,r){const t=q();let{x:l}=e,{y:n}=e,{onCoinCollected:i}=e,f;U("step",()=>{f.y>600&&i()});const s=()=>{i(),de.update(u=>u+R.Math.RND.integerInRange(1,3)),t.coinSound.play()};function o(u){f=u,r(3,f)}return a.$$set=u=>{"x"in u&&r(0,l=u.x),"y"in u&&r(1,n=u.y),"onCoinCollected"in u&&r(2,i=u.onCoinCollected)},[l,n,i,f,t,s,o]}class yt extends M{constructor(e){super();G(this,e,pt,gt,A,{x:0,y:1,onCoinCollected:2})}}function _t(a){let e,r,t;function l(i){a[12](i)}let n={name:"enemy",x:a[1],y:a[2],animation:a[0],$$slots:{default:[$t]},$$scope:{ctx:a}};return a[5]!==void 0&&(n.instance=a[5]),e=new K({props:n}),I.push(()=>L(e,"instance",l)),{c(){d(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,f){h(e,i,f),t=!0},p(i,f){const s={};f&2&&(s.x=i[1]),f&4&&(s.y=i[2]),f&1&&(s.animation=i[0]),f&66537&&(s.$$scope={dirty:f,ctx:i}),!r&&f&32&&(r=!0,s.instance=i[5],O(()=>r=!1)),e.$set(s)},i(i){t||(p(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){b(e,i)}}}function dt(a){let e,r;return e=new yt({props:{x:a[5].x,y:a[5].y,onCoinCollected:a[10]}}),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,l){h(e,t,l),r=!0},p(t,l){const n={};l&32&&(n.x=t[5].x),l&32&&(n.y=t[5].y),l&16&&(n.onCoinCollected=t[10]),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function $t(a){let e,r,t,l;return e=new J({props:{width:a[0]=="anims/enemy/fly"?33:26,height:(a[0]=="anims/enemy/fly",24),offsetX:a[0]=="anims/enemy/fly"?23:4,offsetY:a[0]=="anims/enemy/fly"?21:15,velocityX:a[3],bounce:1,collideWorldBounds:!0}}),t=new V({props:{with:"playerBullet",overlapOnly:!0}}),t.$on("collide",a[11]),{c(){d(e.$$.fragment),r=D(),d(t.$$.fragment)},l(n){$(e.$$.fragment,n),r=E(n),$(t.$$.fragment,n)},m(n,i){h(e,n,i),B(n,r,i),h(t,n,i),l=!0},p(n,i){const f={};i&1&&(f.width=n[0]=="anims/enemy/fly"?33:26),i&1&&(f.height=(n[0]=="anims/enemy/fly",24)),i&1&&(f.offsetX=n[0]=="anims/enemy/fly"?23:4),i&1&&(f.offsetY=n[0]=="anims/enemy/fly"?21:15),i&8&&(f.velocityX=n[3]),e.$set(f)},i(n){l||(p(e.$$.fragment,n),p(t.$$.fragment,n),l=!0)},o(n){y(e.$$.fragment,n),y(t.$$.fragment,n),l=!1},d(n){b(e,n),n&&X(r),b(t,n)}}}function ht(a){let e,r,t,l;const n=[dt,_t],i=[];function f(s,o){return s[6]?0:1}return e=f(a),r=i[e]=n[e](a),{c(){r.c(),t=S()},l(s){r.l(s),t=S()},m(s,o){i[e].m(s,o),B(s,t,o),l=!0},p(s,[o]){let u=e;e=f(s),e===u?i[e].p(s,o):(T(),y(i[u],1,1,()=>{i[u]=null}),P(),r=i[e],r?r.p(s,o):(r=i[e]=n[e](s),r.c()),p(r,1),r.m(t.parentNode,t))},i(s){l||(p(r),l=!0)},o(s){y(r),l=!1},d(s){i[e].d(s),s&&X(t)}}}function bt(a,e,r){const t=q();let{animation:l}=e,{x:n}=e,{y:i}=e,{velocityX:f}=e,{onDie:s}=e,o,u=!1,_,c,m;_=t.add.particles("textures/enemy/particles").createEmitter({frequency:-1,blendMode:R.BlendModes.ADD,gravityY:600,alpha:{start:1,end:0,ease:"Cubic.easeIn"},lifespan:500,angle:{min:-180,max:180},speed:{min:0,max:2400},scale:{min:.4,max:.6},frame:[...Array(3).keys()]});let k=t.add.particles("textures/flirty-girl/particles");c=k.createEmitter({frequency:-1,blendMode:R.BlendModes.ADD,gravityY:600,alpha:{start:1,end:0,ease:"Cubic.easeIn"},lifespan:500,angle:{min:-180,max:180},speed:{min:0,max:600},frame:[0]}),m=k.createEmitter({frequency:-1,blendMode:R.BlendModes.ADD,gravityY:600,alpha:{start:1,end:0,ease:"Cubic.easeIn"},lifespan:500,angle:{min:-180,max:180},speed:{min:0,max:600},frame:[1]}),U("step",()=>{o.y>600&&s(0)});const x=()=>{s()},v=()=>{r(6,u=!0),l=="anims/enemy/fly"&&_.explode(100,o.x,o.y),(l=="anims/flirtyGirl/default"||l=="anims/flirtyGirl/attack")&&c.explode(1,o.x,o.y)&&m.explode(1,o.x,o.y)};function g(w){o=w,r(5,o)}return a.$$set=w=>{"animation"in w&&r(0,l=w.animation),"x"in w&&r(1,n=w.x),"y"in w&&r(2,i=w.y),"velocityX"in w&&r(3,f=w.velocityX),"onDie"in w&&r(4,s=w.onDie)},[l,n,i,f,s,o,u,_,c,m,x,v,g]}class kt extends M{constructor(e){super();G(this,e,bt,ht,A,{animation:0,x:1,y:2,velocityX:3,onDie:4})}}function wt(a){let e=a.children.length-1;for(;e>=0;){let r=a.children.list[e];(r.type==="Image"||r.type==="ParticleEmitterManager"||r.type==="Sprite"||r.type==="Text"||r.type==="TileSprite")&&(r.destroy(),a.tweens.killTweensOf(r)),e--}}function be(a,e,r){const t=a.slice();return t[12]=e[r],t}function ke(a,e){let r,t,l;function n(...i){return e[4](e[12],...i)}return t=new kt({props:{animation:e[12].animation,x:100+e[12].x,y:70+e[12].y+e[2],velocityX:e[1]==="playing"?we:0,onDie:n}}),{key:a,first:null,c(){r=S(),d(t.$$.fragment),this.h()},l(i){r=S(),$(t.$$.fragment,i),this.h()},h(){this.first=r},m(i,f){B(i,r,f),h(t,i,f),l=!0},p(i,f){e=i;const s={};f&1&&(s.animation=e[12].animation),f&1&&(s.x=100+e[12].x),f&5&&(s.y=70+e[12].y+e[2]),f&2&&(s.velocityX=e[1]==="playing"?we:0),f&1&&(s.onDie=n),t.$set(s)},i(i){l||(p(t.$$.fragment,i),l=!0)},o(i){y(t.$$.fragment,i),l=!1},d(i){i&&X(r),b(t,i)}}}function xt(a){let e=[],r=new Map,t,l,n=a[0];const i=f=>f[12].key;for(let f=0;f<n.length;f+=1){let s=be(a,n,f),o=i(s);r.set(o,e[f]=ke(o,s))}return{c(){for(let f=0;f<e.length;f+=1)e[f].c();t=S()},l(f){for(let s=0;s<e.length;s+=1)e[s].l(f);t=S()},m(f,s){for(let o=0;o<e.length;o+=1)e[o].m(f,s);B(f,t,s),l=!0},p(f,[s]){s&7&&(n=f[0],T(),e=Oe(e,s,i,1,f,n,r,t.parentNode,We,ke,t,be),P())},i(f){if(!l){for(let s=0;s<n.length;s+=1)p(e[s]);l=!0}},o(f){for(let s=0;s<e.length;s+=1)y(e[s]);l=!1},d(f){for(let s=0;s<e.length;s+=1)e[s].d(f);f&&X(t)}}}let we=40;function vt(a,e,r){let t,l,n;N(a,re,k=>r(3,t=k)),N(a,j,k=>r(5,l=k)),N(a,$e,k=>r(1,n=k));const i=q(),{spawn:f}=fe();let s=[],o=0;const u={callback:()=>{if(n==="playing"){r(2,o+=16);const k=i.children.list.filter(x=>x.name==="enemy");if(k.length<=20&&_.delay==3500){let x={callback:u.callback,loop:!0,delay:1e3};_.reset(x)}if(k.length<=10&&_.delay==1e3){let x={callback:u.callback,loop:!0,delay:500};_.reset(x)}}},loop:!0,delay:3500},_=i.time.addEvent(u),c=i.time.addEvent({callback:()=>{if(!l&&n==="playing"){const k=i.children.getByName("player"),x=i.children.list.filter(g=>g.name==="enemy"),v=x[R.Math.RND.integerInRange(0,x.length-1)];if(k&&v){const g=Math.atan2(k.y-v.y,k.x-v.x)*180/Math.PI,w=i.physics.velocityFromAngle(g,180);v.texture.key=="textures/flirty-girl"?(v&&v.once("animationcomplete-anims/flirtyGirl/attack",()=>{f(te,{name:"flirtyGirlBullet",texture:"textures/kiss-bullet",target:"player",x:v.x,y:v.y,velocityX:w.x,velocityY:w.y}),v.play("anims/flirtyGirl/default")}),v.play("anims/flirtyGirl/attack")):f(te,{name:"enemyBullet",texture:"textures/enemy/bullet",target:"player",x:v.x,y:v.y,velocityX:w.x,velocityY:w.y})}}},loop:!0,delay:2e3});se(()=>()=>{_.destroy(),c.destroy()});let m=[["anims/enemy/fly","anims/flirtyGirl/default"],["anims/enemy/fly","anims/ufo/fly"],["anims/ufo/fly","anims/ufo/fly"]];const C=(k,x=100)=>{r(0,s=s.filter(v=>v!==k)),ne.update(v=>v+x)};return a.$$.update=()=>{if(a.$$.dirty&10&&n==="playing"){let k=m[t]?m[t]:m[0];_.reset(u),r(2,o=0),r(0,s=Array.from({length:40}).map((x,v)=>{const g=10,w=v%g,Z=Math.floor(v/g);return{x:w*52,y:Z*32,key:v+Date.now(),animation:v%2==0?k[0]:k[1]}}))}a.$$.dirty&9&&s.length===0&&(z(j,l=!0,l),wt(i),i.scene.restart({currentLevel:t+1}))},[s,n,o,t,C]}class Ct extends M{constructor(e){super();G(this,e,vt,xt,A,{})}}function xe(a){let e,r,t,l,n,i,f,s,o;e=new H({props:{x:16,y:16,text:`Score: ${a[2]}`}}),t=new H({props:{x:16,y:32,text:`Coins: ${a[3]}`}}),n=new H({props:{x:700,y:16,text:`Lives: ${a[4]}`}});let u=a[0]==="playing"&&a[3]===0&&ve(),_=a[0]!=="playing"&&Ce(a);return{c(){d(e.$$.fragment),r=D(),d(t.$$.fragment),l=D(),d(n.$$.fragment),i=D(),u&&u.c(),f=D(),_&&_.c(),s=S()},l(c){$(e.$$.fragment,c),r=E(c),$(t.$$.fragment,c),l=E(c),$(n.$$.fragment,c),i=E(c),u&&u.l(c),f=E(c),_&&_.l(c),s=S()},m(c,m){h(e,c,m),B(c,r,m),h(t,c,m),B(c,l,m),h(n,c,m),B(c,i,m),u&&u.m(c,m),B(c,f,m),_&&_.m(c,m),B(c,s,m),o=!0},p(c,m){const C={};m&4&&(C.text=`Score: ${c[2]}`),e.$set(C);const k={};m&8&&(k.text=`Coins: ${c[3]}`),t.$set(k);const x={};m&16&&(x.text=`Lives: ${c[4]}`),n.$set(x),c[0]==="playing"&&c[3]===0?u?m&9&&p(u,1):(u=ve(),u.c(),p(u,1),u.m(f.parentNode,f)):u&&(T(),y(u,1,1,()=>{u=null}),P()),c[0]!=="playing"?_?(_.p(c,m),m&1&&p(_,1)):(_=Ce(c),_.c(),p(_,1),_.m(s.parentNode,s)):_&&(T(),y(_,1,1,()=>{_=null}),P())},i(c){o||(p(e.$$.fragment,c),p(t.$$.fragment,c),p(n.$$.fragment,c),p(u),p(_),o=!0)},o(c){y(e.$$.fragment,c),y(t.$$.fragment,c),y(n.$$.fragment,c),y(u),y(_),o=!1},d(c){b(e,c),c&&X(r),b(t,c),c&&X(l),b(n,c),c&&X(i),u&&u.d(c),c&&X(f),_&&_.d(c),c&&X(s)}}}function ve(a){let e,r;return e=new H({props:{x:180,y:575,text:"Move with arrow keys, shoot with spacebar"}}),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,l){h(e,t,l),r=!0},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Ce(a){let e,r,t,l;return e=new H({props:{x:250,y:200,text:a[0]==="win"?"You Win!":"Game Over",fontSize:"48px",align:"center"}}),t=new H({props:{x:280,y:265,text:"Click to restart",fontSize:"20px"}}),{c(){d(e.$$.fragment),r=D(),d(t.$$.fragment)},l(n){$(e.$$.fragment,n),r=E(n),$(t.$$.fragment,n)},m(n,i){h(e,n,i),B(n,r,i),h(t,n,i),l=!0},p(n,i){const f={};i&1&&(f.text=n[0]==="win"?"You Win!":"Game Over"),e.$set(f)},i(n){l||(p(e.$$.fragment,n),p(t.$$.fragment,n),l=!0)},o(n){y(e.$$.fragment,n),y(t.$$.fragment,n),l=!1},d(n){b(e,n),n&&X(r),b(t,n)}}}function Bt(a){let e,r,t=!a[1]&&xe(a);return{c(){t&&t.c(),e=S()},l(l){t&&t.l(l),e=S()},m(l,n){t&&t.m(l,n),B(l,e,n),r=!0},p(l,[n]){l[1]?t&&(T(),y(t,1,1,()=>{t=null}),P()):t?(t.p(l,n),n&2&&p(t,1)):(t=xe(l),t.c(),p(t,1),t.m(e.parentNode,e))},i(l){r||(p(t),r=!0)},o(l){y(t),r=!1},d(l){t&&t.d(l),l&&X(e)}}}function Xt(a,e,r){let t,l,n,i,f;return N(a,$e,s=>r(0,t=s)),N(a,j,s=>r(1,l=s)),N(a,ne,s=>r(2,n=s)),N(a,de,s=>r(3,i=s)),N(a,Q,s=>r(4,f=s)),He("pointerdown",()=>{t!=="playing"&&st()}),[t,l,n,i,f]}class Yt extends M{constructor(e){super();G(this,e,Xt,Bt,A,{})}}const St=a=>({}),Be=a=>({slot:"loading"}),Dt=a=>({}),Xe=a=>({slot:"loading"});function Et(a){let e,r;return e=new oe({props:{width:800,height:600,scale:{mode:R.Scale.FIT,autoCenter:R.Scale.CENTER_BOTH},render:{pixelArt:!0},physics:{default:"arcade"},$$slots:{default:[At]},$$scope:{ctx:a}}}),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,l){h(e,t,l),r=!0},p(t,l){const n={};l&8204&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Nt(a){let e,r,t;function l(i){a[10](i)}let n={width:800,height:600,physics:{default:"arcade"},scale:{mode:R.Scale.FIT,autoCenter:R.Scale.CENTER_BOTH},render:{pixelArt:!0},$$slots:{default:[Lt]},$$scope:{ctx:a}};return a[0]!==void 0&&(n.instance=a[0]),e=new oe({props:n}),I.push(()=>L(e,"instance",l)),{c(){d(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,f){h(e,i,f),t=!0},p(i,f){const s={};f&8240&&(s.$$scope={dirty:f,ctx:i}),!r&&f&1&&(r=!0,s.instance=i[0],O(()=>r=!1)),e.$set(s)},i(i){t||(p(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){b(e,i)}}}function Rt(a){let e,r,t,l,n,i,f,s;e=new _e({});function o(m){a[11](m)}let u={scale:2,texture:"textures/logo",originX:0,originY:0,x:(800-537)/2,y:-124};a[2]!==void 0&&(u.instance=a[2]),t=new K({props:u}),I.push(()=>L(t,"instance",o));function _(m){a[12](m)}let c={align:"center",scaleX:-1,scaleY:0,originX:0,originY:0,x:(800-390)/2,y:500,fontSize:"18px",text:">  UPGRADE SHIP  <"};return a[3]!==void 0&&(c.instance=a[3]),i=new H({props:c}),I.push(()=>L(i,"instance",_)),{c(){d(e.$$.fragment),r=D(),d(t.$$.fragment),n=D(),d(i.$$.fragment)},l(m){$(e.$$.fragment,m),r=E(m),$(t.$$.fragment,m),n=E(m),$(i.$$.fragment,m)},m(m,C){h(e,m,C),B(m,r,C),h(t,m,C),B(m,n,C),h(i,m,C),s=!0},p(m,C){const k={};!l&&C&4&&(l=!0,k.instance=m[2],O(()=>l=!1)),t.$set(k);const x={};!f&&C&8&&(f=!0,x.instance=m[3],O(()=>f=!1)),i.$set(x)},i(m){s||(p(e.$$.fragment,m),p(t.$$.fragment,m),p(i.$$.fragment,m),s=!0)},o(m){y(e.$$.fragment,m),y(t.$$.fragment,m),y(i.$$.fragment,m),s=!1},d(m){b(e,m),m&&X(r),b(t,m),m&&X(n),b(i,m)}}}function Mt(a){let e,r;return e=new ye({props:{x:400,y:300,progress:a[15]}}),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,l){h(e,t,l),r=!0},p(t,l){const n={};l&32768&&(n.progress=t[15]),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Gt(a){let e;const r=a[9].default,t=me(r,a,a[13],Be),l=t||Mt(a);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,i){l&&l.m(n,i),e=!0},p(n,i){t?t.p&&(!e||i&8192)&&ce(t,r,n,n[13],e?pe(r,n[13],i,St):ge(n[13]),Be):l&&l.p&&(!e||i&32768)&&l.p(n,e?i:-1)},i(n){e||(p(l,n),e=!0)},o(n){y(l,n),e=!1},d(n){l&&l.d(n)}}}function At(a){let e,r;return e=new ue({props:{key:"menu",preload:De,create:a[7],$$slots:{loading:[Gt,({progress:t})=>({15:t}),({progress:t})=>t?32768:0],default:[Rt,({progress:t})=>({15:t}),({progress:t})=>t?32768:0]},$$scope:{ctx:a}}}),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,l){h(e,t,l),r=!0},p(t,l){const n={};l&40972&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Ye(a){let e,r;return e=new Ke({props:{$$slots:{default:[Tt]},$$scope:{ctx:a}}}),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,l){h(e,t,l),r=!0},p(t,l){const n={};l&8224&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Se(a){let e,r;return e=new mt({props:{x:300,y:500}}),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,l){h(e,t,l),r=!0},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Tt(a){let e,r,t,l,n,i,f;e=new _e({}),t=new Ct({});let s=a[5]>0&&Se();return i=new Yt({}),{c(){d(e.$$.fragment),r=D(),d(t.$$.fragment),l=D(),s&&s.c(),n=D(),d(i.$$.fragment)},l(o){$(e.$$.fragment,o),r=E(o),$(t.$$.fragment,o),l=E(o),s&&s.l(o),n=E(o),$(i.$$.fragment,o)},m(o,u){h(e,o,u),B(o,r,u),h(t,o,u),B(o,l,u),s&&s.m(o,u),B(o,n,u),h(i,o,u),f=!0},p(o,u){o[5]>0?s?u&32&&p(s,1):(s=Se(),s.c(),p(s,1),s.m(n.parentNode,n)):s&&(T(),y(s,1,1,()=>{s=null}),P())},i(o){f||(p(e.$$.fragment,o),p(t.$$.fragment,o),p(s),p(i.$$.fragment,o),f=!0)},o(o){y(e.$$.fragment,o),y(t.$$.fragment,o),y(s),y(i.$$.fragment,o),f=!1},d(o){b(e,o),o&&X(r),b(t,o),o&&X(l),s&&s.d(o),o&&X(n),b(i,o)}}}function Pt(a){let e,r,t=!a[4]&&Ye(a);return{c(){t&&t.c(),e=S()},l(l){t&&t.l(l),e=S()},m(l,n){t&&t.m(l,n),B(l,e,n),r=!0},p(l,n){l[4]?t&&(T(),y(t,1,1,()=>{t=null}),P()):t?(t.p(l,n),n&16&&p(t,1)):(t=Ye(l),t.c(),p(t,1),t.m(e.parentNode,e))},i(l){r||(p(t),r=!0)},o(l){y(t),r=!1},d(l){t&&t.d(l),l&&X(e)}}}function Ft(a){let e,r;return e=new ye({props:{x:400,y:300,progress:a[15]}}),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,l){h(e,t,l),r=!0},p(t,l){const n={};l&32768&&(n.progress=t[15]),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function It(a){let e;const r=a[9].default,t=me(r,a,a[13],Xe),l=t||Ft(a);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,i){l&&l.m(n,i),e=!0},p(n,i){t?t.p&&(!e||i&8192)&&ce(t,r,n,n[13],e?pe(r,n[13],i,Dt):ge(n[13]),Xe):l&&l.p&&(!e||i&32768)&&l.p(n,e?i:-1)},i(n){e||(p(l,n),e=!0)},o(n){y(l,n),e=!1},d(n){l&&l.d(n)}}}function Lt(a){let e,r;return e=new ue({props:{key:"main",preload:De,create:a[6],$$slots:{loading:[It,({progress:t})=>({15:t}),({progress:t})=>t?32768:0],default:[Pt,({progress:t})=>({15:t}),({progress:t})=>t?32768:0]},$$scope:{ctx:a}}}),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,l){h(e,t,l),r=!0},p(t,l){const n={};l&41008&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){b(e,t)}}}function Ot(a){let e,r,t,l;const n=[Nt,Et],i=[];function f(s,o){return s[1]?0:1}return e=f(a),r=i[e]=n[e](a),{c(){r.c(),t=S()},l(s){r.l(s),t=S()},m(s,o){i[e].m(s,o),B(s,t,o),l=!0},p(s,[o]){let u=e;e=f(s),e===u?i[e].p(s,o):(T(),y(i[u],1,1,()=>{i[u]=null}),P(),r=i[e],r?r.p(s,o):(r=i[e]=n[e](s),r.c()),p(r,1),r.m(t.parentNode,t))},i(s){l||(p(r),l=!0)},o(s){y(r),l=!1},d(s){i[e].d(s),s&&X(t)}}}function De(a){a.load.audio("audio/coin","assets/coin.mp3"),a.load.image("textures/copyright","assets/logo-dark.png"),a.load.image("textures/logo","assets/RonaGun-logo.png"),a.load.image("textures/starfield","assets/star-bg-0.png"),a.load.spritesheet("textures/coin","assets/coin.png",{frameWidth:54,frameHeight:54}),a.load.spritesheet("textures/enemy","assets/invader-gold.png",{frameWidth:79,frameHeight:66}),a.load.spritesheet("textures/enemy/particles","assets/invader-gold-particles.png",{frameWidth:3,frameHeight:3}),a.load.spritesheet("textures/explosion","assets/explode.png",{frameWidth:128,frameHeight:128}),a.load.spritesheet("textures/flirty-girl","assets/flirty-gold-girl.png",{frameWidth:31,frameHeight:40}),a.load.spritesheet("textures/flirty-girl/particles","assets/flirty-girl-particles.png",{frameWidth:15,frameHeight:29}),a.load.spritesheet("textures/kiss-bullet","assets/kiss-bullet.png",{frameWidth:25,frameHeight:21}),a.load.spritesheet("textures/ufo","assets/ufo.png",{frameWidth:32,frameHeight:30}),a.load.spritesheet("textures/ufo/explosion","assets/ufo-explosion.png",{frameWidth:32,frameHeight:30}),a.load.image("textures/player","assets/ship.png"),a.load.spritesheet("textures/player/bullet","assets/sperm.png",{frameWidth:6,frameHeight:22}),a.load.image("textures/enemy/bullet","assets/enemy-bullet.png")}function Wt(a,e,r){let t,l,n,i;N(a,ie,g=>r(8,t=g)),N(a,re,g=>r(14,l=g)),N(a,j,g=>r(4,n=g)),N(a,Q,g=>r(5,i=g));let{$$slots:f={},$$scope:s}=e,o,u=!1;function _(g){if(g.anims.create({key:"anims/enemy/fly",frames:g.anims.generateFrameNumbers("textures/enemy"),frameRate:6,repeat:-1}),g.anims.create({key:"anims/enemy/explosion",frames:g.anims.generateFrameNumbers("textures/explosion"),frameRate:24}),g.anims.create({key:"anims/bullet/default",frames:g.anims.generateFrameNumbers("textures/player/bullet"),frameRate:20,repeat:-1}),g.anims.create({key:"anims/coin/default",frames:g.anims.generateFrameNumbers("textures/coin"),frameRate:20,repeat:-1}),g.anims.create({key:"anims/enemyBullet/default",frames:[{key:"textures/enemy/bullet",frame:0}],frameRate:20,repeat:-1}),g.anims.create({key:"anims/flirtyGirl/default",frames:[{key:"textures/flirty-girl",frame:0},{key:"textures/flirty-girl",frame:1}],frameRate:6,repeat:-1}),g.anims.create({key:"anims/flirtyGirl/attack",frames:[{key:"textures/flirty-girl",frame:1},{key:"textures/flirty-girl",frame:2},{key:"textures/flirty-girl",frame:3},{key:"textures/flirty-girl",frame:4},{key:"textures/flirty-girl",frame:3},{key:"textures/flirty-girl",frame:4},{key:"textures/flirty-girl",frame:1}],frameRate:6}),g.anims.create({key:"anims/kissBullet/default",frames:g.anims.generateFrameNumbers("textures/kiss-bullet"),frameRate:6,repeat:-1}),g.anims.create({key:"anims/player/explosion",frames:g.anims.generateFrameNumbers("textures/explosion"),frameRate:24}),g.anims.create({key:"anims/ufo/explosion",frames:g.anims.generateFrameNumbers("textures/ufo/explosion"),frameRate:30}),g.anims.create({key:"anims/ufo/fly",frames:g.anims.generateFrameNumbers("textures/ufo"),frameRate:4,repeat:-1}),g.coinSound=g.sound.add("audio/coin"),g.physics.world.setBoundsCollision(!0,!0,!0,!1),g.scene.settings.data.currentLevel){z(re,l=g.scene.settings.data.currentLevel,l);let w=g.add.text(800/2,-100,`Level ${l+1}`).setDepth(30);g.physics.world.enableBody(w),g.time.addEvent({delay:250,callback:()=>w.body.setVelocityY(125)}),g.time.addEvent({delay:1e4,callback:()=>w.destroy()})}g.input.gamepad.once("down",w=>{z(ie,t=w,t)}),j.set(!1)}let c,m;function C(g){g.input.on("pointerdown",()=>{r(1,u=!0)}),g.copyright=g.add.sprite(0,0,"textures/copyright").setOrigin(0),g.copyright.x=(800-g.copyright.width)/2,g.copyright.y=600,g.copyright.blendMode=R.BlendModes.ADD;var w=new TimelineMax({onComplete(){},onCompleteScope:this});g.time.addEvent({delay:250,callback:()=>{w.to(g.copyright,2,{y:600-g.copyright.height-6,ease:Quint.easeOut},"+=0.0"),w.addCallback(function(){},"-=0.1",null,this),w.to(c,.9,{y:75,ease:Quint.easeIn},"-=0.8"),w.to(c,.9,{scaleX:1,scaleY:1,ease:Quint.easeIn},"-=0.9"),w.to(m,1.4,{scaleX:2,scaleY:2,ease:Quint.easeIn},"-=0.7")}})}function k(g){o=g,r(0,o)}function x(g){c=g,r(2,c)}function v(g){m=g,r(3,m)}return a.$$set=g=>{"$$scope"in g&&r(13,s=g.$$scope)},a.$$.update=()=>{a.$$.dirty&1&&(window.game=o),a.$$.dirty&256&&(window.ding=t)},[o,u,c,m,n,i,_,C,t,f,k,x,v,s]}class Ht extends M{constructor(e){super();G(this,e,Wt,Ot,A,{})}}new Ht({target:document.body});
