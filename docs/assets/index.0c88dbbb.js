import{S as X,i as N,s as Y,C as _e,c as p,a as _,m as y,t as c,b as g,d as $,e as Q,f as ye,g as R,h as z,j as $e,k as de,R as Z,P as E,l as D,n as S,o as x,p as he,q as be,r as C,u as we,T as ke,v as J,w as O,x as xe,y as B,z as W,A as F,B as I,D as ee,E as T,F as H,G as L,H as G,I as q,J as Ce,K as j,L as te,M as ve,N as De,O as Se,Q as M,U as Xe,V as Ne,W as Ye,X as Be,Y as Ee,Z as Pe,_ as Re,$ as Me}from"./vendor.20e03070.js";const Ae=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function i(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(a){if(a.ep)return;a.ep=!0;const n=i(a);fetch(a.href,n)}};Ae();function Oe(s){let e,i,t,a;const n=[{width:P},{height:50},{fillColor:7829367},s[4]];let r={};for(let l=0;l<n.length;l+=1)r=z(r,n[l]);return e=new Z({props:r}),t=new Z({props:{x:-P/2,originX:0,originY:.5,width:E.Math.Clamp(P*s[2],10,P),height:50,fillColor:12303291}}),{c(){p(e.$$.fragment),i=D(),p(t.$$.fragment)},l(l){_(e.$$.fragment,l),i=S(l),_(t.$$.fragment,l)},m(l,o){y(e,l,o),x(l,i,o),y(t,l,o),a=!0},p(l,o){const f=o&16?he(n,[o&0&&{width:P},n[1],n[2],o&16&&be(l[4])]):{};e.$set(f);const m={};o&4&&(m.width=E.Math.Clamp(P*l[2],10,P)),t.$set(m)},i(l){a||(c(e.$$.fragment,l),c(t.$$.fragment,l),a=!0)},o(l){g(e.$$.fragment,l),g(t.$$.fragment,l),a=!1},d(l){$(e,l),l&&C(i),$(t,l)}}}function We(s){let e,i;return e=new _e({props:{x:s[0],y:s[1],width:P,height:50,$$slots:{default:[Oe]},$$scope:{ctx:s}}}),{c(){p(e.$$.fragment)},l(t){_(e.$$.fragment,t)},m(t,a){y(e,t,a),i=!0},p(t,[a]){const n={};a&1&&(n.x=t[0]),a&2&&(n.y=t[1]),a&84&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){i||(c(e.$$.fragment,t),i=!0)},o(t){g(e.$$.fragment,t),i=!1},d(t){$(e,t)}}}const P=400;function Fe(s,e,i){const t=["x","y","progress"];let a=Q(e,t),n,{x:r}=e,{y:l}=e,{progress:o=0}=e;const f=ye(o,{duration:200,easing:we});return R(s,f,m=>i(2,n=m)),s.$$set=m=>{e=z(z({},e),$e(m)),i(4,a=Q(e,t)),"x"in m&&i(0,r=m.x),"y"in m&&i(1,l=m.y),"progress"in m&&i(5,o=m.progress)},s.$$.update=()=>{s.$$.dirty&32&&de(f,n=o,n)},[r,l,n,f,a,o]}class Ie extends X{constructor(e){super();N(this,e,Fe,We,Y,{x:0,y:1,progress:5})}}function Te(s){let e,i;return e=new ke({props:{depth:-1,x:0,y:0,width:800,height:600,originX:0,originY:0,texture:"textures/starfield",tilePositionY:s[0]}}),{c(){p(e.$$.fragment)},l(t){_(e.$$.fragment,t)},m(t,a){y(e,t,a),i=!0},p(t,[a]){const n={};a&1&&(n.tilePositionY=t[0]),e.$set(n)},i(t){i||(c(e.$$.fragment,t),i=!0)},o(t){g(e.$$.fragment,t),i=!1},d(t){$(e,t)}}}function He(s,e,i){let t=0;return J("step",()=>{i(0,t-=2)}),[t]}class Le extends X{constructor(e){super();N(this,e,He,Te,Y,{})}}function Ke(s){let e,i;return e=new O({props:{x:s[0],y:s[1],depth:30,animation:s[2],scale:s[2]=="anims/ufo/explosion"?1:.75}}),e.$on("animationcomplete",s[3]),{c(){p(e.$$.fragment)},l(t){_(e.$$.fragment,t)},m(t,a){y(e,t,a),i=!0},p(t,[a]){const n={};a&1&&(n.x=t[0]),a&2&&(n.y=t[1]),a&4&&(n.animation=t[2]),a&4&&(n.scale=t[2]=="anims/ufo/explosion"?1:.75),e.$set(n)},i(t){i||(c(e.$$.fragment,t),i=!0)},o(t){g(e.$$.fragment,t),i=!1},d(t){$(e,t)}}}function Ge(s,e,i){let{x:t}=e,{y:a}=e,{animation:n="anims/enemy/explosion"}=e;function r(l){xe.call(this,s,l)}return s.$$set=l=>{"x"in l&&i(0,t=l.x),"y"in l&&i(1,a=l.y),"animation"in l&&i(2,n=l.animation)},[t,a,n,r]}class qe extends X{constructor(e){super();N(this,e,Ge,Ke,Y,{x:0,y:1,animation:2})}}function je(s){let e,i,t;function a(r){s[16](r)}let n={animation:s[0]==="enemyBullet"?"anims/enemyBullet/default":"anims/bullet/default",depth:s[3],name:s[0],texture:s[2],x:s[4],y:s[5],$$slots:{default:[Je]},$$scope:{ctx:s}};return s[9]!==void 0&&(n.instance=s[9]),e=new O({props:n}),T.push(()=>H(e,"instance",a)),{c(){p(e.$$.fragment)},l(r){_(e.$$.fragment,r)},m(r,l){y(e,r,l),t=!0},p(r,l){const o={};l&1&&(o.animation=r[0]==="enemyBullet"?"anims/enemyBullet/default":"anims/bullet/default"),l&8&&(o.depth=r[3]),l&1&&(o.name=r[0]),l&4&&(o.texture=r[2]),l&16&&(o.x=r[4]),l&32&&(o.y=r[5]),l&540354&&(o.$$scope={dirty:l,ctx:r}),!i&&l&512&&(i=!0,o.instance=r[9],L(()=>i=!1)),e.$set(o)},i(r){t||(c(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}function ze(s){let e,i;return e=new qe({props:{animation:s[13],x:s[12].x,y:s[12].y-32}}),e.$on("animationcomplete",s[14]),{c(){p(e.$$.fragment)},l(t){_(e.$$.fragment,t)},m(t,a){y(e,t,a),i=!0},p(t,a){const n={};a&8192&&(n.animation=t[13]),a&4096&&(n.x=t[12].x),a&4096&&(n.y=t[12].y-32),e.$set(n)},i(t){i||(c(e.$$.fragment,t),i=!0)},o(t){g(e.$$.fragment,t),i=!1},d(t){$(e,t)}}}function Je(s){let e,i,t,a;return e=new G({props:{with:s[1],overlapOnly:!0}}),e.$on("collide",s[15]),t=new q({props:{velocityY:s[7],velocityX:s[6]}}),{c(){p(e.$$.fragment),i=D(),p(t.$$.fragment)},l(n){_(e.$$.fragment,n),i=S(n),_(t.$$.fragment,n)},m(n,r){y(e,n,r),x(n,i,r),y(t,n,r),a=!0},p(n,r){const l={};r&2&&(l.with=n[1]),e.$set(l);const o={};r&128&&(o.velocityY=n[7]),r&64&&(o.velocityX=n[6]),t.$set(o)},i(n){a||(c(e.$$.fragment,n),c(t.$$.fragment,n),a=!0)},o(n){g(e.$$.fragment,n),g(t.$$.fragment,n),a=!1},d(n){$(e,n),n&&C(i),$(t,n)}}}function Ue(s){let e,i,t,a;const n=[ze,je],r=[];function l(o,f){return o[10]?0:1}return e=l(s),i=r[e]=n[e](s),{c(){i.c(),t=B()},l(o){i.l(o),t=B()},m(o,f){r[e].m(o,f),x(o,t,f),a=!0},p(o,[f]){let m=e;e=l(o),e===m?r[e].p(o,f):(W(),g(r[m],1,1,()=>{r[m]=null}),F(),i=r[e],i?i.p(o,f):(i=r[e]=n[e](o),i.c()),c(i,1),i.m(t.parentNode,t))},i(o){a||(c(i),a=!0)},o(o){g(i),a=!1},d(o){r[e].d(o),o&&C(t)}}}function Ve(s,e,i){let{name:t}=e,{target:a}=e,{texture:n}=e,{depth:r=0}=e,{x:l}=e,{y:o}=e,{velocityX:f=0}=e,{velocityY:m=0}=e,{onDestroy:d}=e,u,h=!1,k,v,b,me=I().time.addEvent({callback:()=>{h||d()},delay:3e3});ee(()=>()=>me.destroy());const ce=()=>d(),ge=w=>{i(10,h=!0),i(11,k=w.detail.other.texture.key),i(13,b=k.replace("textures","anims")+"/explosion"),i(12,v={x:u.x,y:u.y})};function pe(w){u=w,i(9,u)}return s.$$set=w=>{"name"in w&&i(0,t=w.name),"target"in w&&i(1,a=w.target),"texture"in w&&i(2,n=w.texture),"depth"in w&&i(3,r=w.depth),"x"in w&&i(4,l=w.x),"y"in w&&i(5,o=w.y),"velocityX"in w&&i(6,f=w.velocityX),"velocityY"in w&&i(7,m=w.velocityY),"onDestroy"in w&&i(8,d=w.onDestroy)},[t,a,n,r,l,o,f,m,d,u,h,k,v,b,ce,ge,pe]}class ne extends X{constructor(e){super();N(this,e,Ve,Ue,Y,{name:0,target:1,texture:2,depth:3,x:4,y:5,velocityX:6,velocityY:7,onDestroy:8})}}const U=j(0),K=j(3),re=j(0),V=j(!1),ie=Ce([K,V],([s,e])=>s<=0?"gameover":e?"win":"playing"),Qe=()=>{U.set(0),K.set(3),V.set(!1)};function Ze(s){let e,i,t,a;return e=new G({props:{with:["enemies","enemyBullet"],overlapOnly:!0}}),e.$on("collide",s[4]),t=new q({props:{velocityX:s[3],collideWorldBounds:!0}}),{c(){p(e.$$.fragment),i=D(),p(t.$$.fragment)},l(n){_(e.$$.fragment,n),i=S(n),_(t.$$.fragment,n)},m(n,r){y(e,n,r),x(n,i,r),y(t,n,r),a=!0},p(n,r){const l={};r&8&&(l.velocityX=n[3]),t.$set(l)},i(n){a||(c(e.$$.fragment,n),c(t.$$.fragment,n),a=!0)},o(n){g(e.$$.fragment,n),g(t.$$.fragment,n),a=!1},d(n){$(e,n),n&&C(i),$(t,n)}}}function et(s){let e,i,t;function a(r){s[5](r)}let n={depth:10,name:"player",texture:"textures/player",x:s[1],y:s[2],$$slots:{default:[Ze]},$$scope:{ctx:s}};return s[0]!==void 0&&(n.instance=s[0]),e=new O({props:n}),T.push(()=>H(e,"instance",a)),{c(){p(e.$$.fragment)},l(r){_(e.$$.fragment,r)},m(r,l){y(e,r,l),t=!0},p(r,[l]){const o={};l&2&&(o.x=r[1]),l&4&&(o.y=r[2]),l&520&&(o.$$scope={dirty:l,ctx:r}),!i&&l&1&&(i=!0,o.instance=r[0],L(()=>i=!1)),e.$set(o)},i(r){t||(c(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}const se=200;function tt(s,e,i){let{x:t}=e,{y:a}=e,{instance:n=void 0}=e;const{spawn:r}=te(),l=I(),o={left:l.input.keyboard.addKey("left"),right:l.input.keyboard.addKey("right"),up:l.input.keyboard.addKey("up"),shoot:l.input.keyboard.addKey("SPACE")};let f=0;J("step",()=>{!o.left.isDown&&!o.right.isDown||o.left.isDown&&o.right.isDown?i(3,f=0):o.left.isDown?i(3,f=-se):o.right.isDown&&i(3,f=se),E.Input.Keyboard.JustDown(o.shoot)&&r(ne,{name:"playerBullet",texture:"textures/player/bullet",target:"enemy",depth:10,x:n.x,y:n.y-8,velocityY:-250})});const m=()=>K.update(u=>u-1);function d(u){n=u,i(0,n)}return s.$$set=u=>{"x"in u&&i(1,t=u.x),"y"in u&&i(2,a=u.y),"instance"in u&&i(0,n=u.instance)},[n,t,a,f,m,d]}class nt extends X{constructor(e){super();N(this,e,tt,et,Y,{x:1,y:2,instance:0})}}function rt(s){let e,i,t,a;return e=new q({props:{velocityY:st}}),t=new G({props:{with:"player",overlapOnly:!0}}),t.$on("collide",s[5]),{c(){p(e.$$.fragment),i=D(),p(t.$$.fragment)},l(n){_(e.$$.fragment,n),i=S(n),_(t.$$.fragment,n)},m(n,r){y(e,n,r),x(n,i,r),y(t,n,r),a=!0},p:ve,i(n){a||(c(e.$$.fragment,n),c(t.$$.fragment,n),a=!0)},o(n){g(e.$$.fragment,n),g(t.$$.fragment,n),a=!1},d(n){$(e,n),n&&C(i),$(t,n)}}}function it(s){let e,i,t;function a(r){s[6](r)}let n={name:"coin",x:s[0],y:s[1],scale:.5,animation:"anims/coin/default",$$slots:{default:[rt]},$$scope:{ctx:s}};return s[3]!==void 0&&(n.instance=s[3]),e=new O({props:n}),T.push(()=>H(e,"instance",a)),{c(){p(e.$$.fragment)},l(r){_(e.$$.fragment,r)},m(r,l){y(e,r,l),t=!0},p(r,[l]){const o={};l&1&&(o.x=r[0]),l&2&&(o.y=r[1]),l&132&&(o.$$scope={dirty:l,ctx:r}),!i&&l&8&&(i=!0,o.instance=r[3],L(()=>i=!1)),e.$set(o)},i(r){t||(c(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}let st=40;function at(s,e,i){const t=I();let{x:a}=e,{y:n}=e,{onCoinCollected:r}=e,l;J("step",()=>{l.y>600&&r()});const o=()=>{r(),re.update(m=>m+E.Math.RND.integerInRange(1,3)),t.coinSound.play()};function f(m){l=m,i(3,l)}return s.$$set=m=>{"x"in m&&i(0,a=m.x),"y"in m&&i(1,n=m.y),"onCoinCollected"in m&&i(2,r=m.onCoinCollected)},[a,n,r,l,t,o,f]}class lt extends X{constructor(e){super();N(this,e,at,it,Y,{x:0,y:1,onCoinCollected:2})}}function ot(s){let e,i,t;function a(r){s[10](r)}let n={name:"enemy",x:s[1],y:s[2],animation:s[0],$$slots:{default:[ut]},$$scope:{ctx:s}};return s[5]!==void 0&&(n.instance=s[5]),e=new O({props:n}),T.push(()=>H(e,"instance",a)),{c(){p(e.$$.fragment)},l(r){_(e.$$.fragment,r)},m(r,l){y(e,r,l),t=!0},p(r,l){const o={};l&2&&(o.x=r[1]),l&4&&(o.y=r[2]),l&1&&(o.animation=r[0]),l&8425&&(o.$$scope={dirty:l,ctx:r}),!i&&l&32&&(i=!0,o.instance=r[5],L(()=>i=!1)),e.$set(o)},i(r){t||(c(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}function ft(s){let e,i;return e=new lt({props:{x:s[5].x,y:s[5].y,onCoinCollected:s[8]}}),{c(){p(e.$$.fragment)},l(t){_(e.$$.fragment,t)},m(t,a){y(e,t,a),i=!0},p(t,a){const n={};a&32&&(n.x=t[5].x),a&32&&(n.y=t[5].y),a&16&&(n.onCoinCollected=t[8]),e.$set(n)},i(t){i||(c(e.$$.fragment,t),i=!0)},o(t){g(e.$$.fragment,t),i=!1},d(t){$(e,t)}}}function ut(s){let e,i,t,a;return e=new q({props:{velocityX:s[3],collideWorldBounds:!0}}),t=new G({props:{with:"playerBullet",overlapOnly:!0}}),t.$on("collide",s[9]),{c(){p(e.$$.fragment),i=D(),p(t.$$.fragment)},l(n){_(e.$$.fragment,n),i=S(n),_(t.$$.fragment,n)},m(n,r){y(e,n,r),x(n,i,r),y(t,n,r),a=!0},p(n,r){const l={};r&8&&(l.velocityX=n[3]),e.$set(l)},i(n){a||(c(e.$$.fragment,n),c(t.$$.fragment,n),a=!0)},o(n){g(e.$$.fragment,n),g(t.$$.fragment,n),a=!1},d(n){$(e,n),n&&C(i),$(t,n)}}}function mt(s){let e,i,t,a;const n=[ft,ot],r=[];function l(o,f){return o[6]?0:1}return e=l(s),i=r[e]=n[e](s),{c(){i.c(),t=B()},l(o){i.l(o),t=B()},m(o,f){r[e].m(o,f),x(o,t,f),a=!0},p(o,[f]){let m=e;e=l(o),e===m?r[e].p(o,f):(W(),g(r[m],1,1,()=>{r[m]=null}),F(),i=r[e],i?i.p(o,f):(i=r[e]=n[e](o),i.c()),c(i,1),i.m(t.parentNode,t))},i(o){a||(c(i),a=!0)},o(o){g(i),a=!1},d(o){r[e].d(o),o&&C(t)}}}function ct(s,e,i){const t=I();let{animation:a}=e,{x:n}=e,{y:r}=e,{velocityX:l}=e,{onDie:o}=e,f,m=!1,d;d=t.add.particles("textures/enemy/particles").createEmitter({frequency:-1,blendMode:E.BlendModes.ADD,gravityY:600,alpha:{start:1,end:0,ease:"Cubic.easeIn"},lifespan:500,angle:{min:-180,max:180},speed:{min:0,max:2400},scale:{min:.4,max:.6},frame:[...Array(3).keys()]});const h=()=>{o()},k=()=>{i(6,m=!0),a=="anims/enemy/fly"&&d.explode(100,f.x,f.y)};function v(b){f=b,i(5,f)}return s.$$set=b=>{"animation"in b&&i(0,a=b.animation),"x"in b&&i(1,n=b.x),"y"in b&&i(2,r=b.y),"velocityX"in b&&i(3,l=b.velocityX),"onDie"in b&&i(4,o=b.onDie)},[a,n,r,l,o,f,m,d,h,k,v]}class gt extends X{constructor(e){super();N(this,e,ct,mt,Y,{animation:0,x:1,y:2,velocityX:3,onDie:4})}}function ae(s,e,i){const t=s.slice();return t[10]=e[i],t}function le(s,e){let i,t,a;function n(){return e[4](e[10])}return t=new gt({props:{animation:e[10].animation,x:100+e[10].x,y:70+e[10].y+e[3],velocityX:e[1]==="playing"?e[2]:0,onDie:n}}),{key:s,first:null,c(){i=B(),p(t.$$.fragment),this.h()},l(r){i=B(),_(t.$$.fragment,r),this.h()},h(){this.first=i},m(r,l){x(r,i,l),y(t,r,l),a=!0},p(r,l){e=r;const o={};l&1&&(o.animation=e[10].animation),l&1&&(o.x=100+e[10].x),l&9&&(o.y=70+e[10].y+e[3]),l&6&&(o.velocityX=e[1]==="playing"?e[2]:0),l&1&&(o.onDie=n),t.$set(o)},i(r){a||(c(t.$$.fragment,r),a=!0)},o(r){g(t.$$.fragment,r),a=!1},d(r){r&&C(i),$(t,r)}}}function pt(s){let e=[],i=new Map,t,a,n=s[0];const r=l=>l[10].key;for(let l=0;l<n.length;l+=1){let o=ae(s,n,l),f=r(o);i.set(f,e[l]=le(f,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=B()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);t=B()},m(l,o){for(let f=0;f<e.length;f+=1)e[f].m(l,o);x(l,t,o),a=!0},p(l,[o]){o&15&&(n=l[0],W(),e=De(e,o,r,1,l,n,i,t.parentNode,Se,le,t,ae),F())},i(l){if(!a){for(let o=0;o<n.length;o+=1)c(e[o]);a=!0}},o(l){for(let o=0;o<e.length;o+=1)g(e[o]);a=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&C(t)}}}function _t(s,e,i){let t;R(s,ie,h=>i(1,t=h));const a=I(),{spawn:n}=te();let r=[],l=40,o=0;const f={callback:()=>{t==="playing"&&(i(2,l=-l),i(3,o+=16))},loop:!0,delay:3500},m=a.time.addEvent(f),d=a.time.addEvent({callback:()=>{if(t==="playing"){const h=a.children.getByName("player"),k=a.children.list.filter(b=>b.name==="enemy"),v=k[E.Math.RND.integerInRange(0,k.length-1)];if(h&&v){const b=Math.atan2(h.y-v.y,h.x-v.x)*180/Math.PI,A=a.physics.velocityFromAngle(b,180);n(ne,{name:"enemyBullet",texture:"textures/enemy/bullet",target:"player",x:v.x,y:v.y,velocityX:A.x,velocityY:A.y})}}},loop:!0,delay:2e3});ee(()=>()=>{m.destroy(),d.destroy()});const u=h=>{i(0,r=r.filter(k=>k!==h)),U.update(k=>k+100)};return s.$$.update=()=>{s.$$.dirty&2&&t==="playing"&&(m.reset(f),i(3,o=0),i(0,r=Array.from({length:40}).map((h,k)=>{const v=10,b=k%v,A=Math.floor(k/v);return{x:b*52,y:A*32,key:k+Date.now(),animation:k%2==0?"anims/enemy/fly":"anims/ufo/fly"}}))),s.$$.dirty&1&&r.length===0&&V.set(!0)},[r,t,l,o,u]}class yt extends X{constructor(e){super();N(this,e,_t,pt,Y,{})}}function oe(s){let e,i,t,a;return e=new M({props:{x:250,y:200,text:s[0]==="win"?"You Win!":"Game Over",fontSize:"48px",align:"center"}}),t=new M({props:{x:280,y:265,text:"Click to restart",fontSize:"20px"}}),{c(){p(e.$$.fragment),i=D(),p(t.$$.fragment)},l(n){_(e.$$.fragment,n),i=S(n),_(t.$$.fragment,n)},m(n,r){y(e,n,r),x(n,i,r),y(t,n,r),a=!0},p(n,r){const l={};r&1&&(l.text=n[0]==="win"?"You Win!":"Game Over"),e.$set(l)},i(n){a||(c(e.$$.fragment,n),c(t.$$.fragment,n),a=!0)},o(n){g(e.$$.fragment,n),g(t.$$.fragment,n),a=!1},d(n){$(e,n),n&&C(i),$(t,n)}}}function $t(s){let e,i,t,a,n,r,l,o,f,m;e=new M({props:{x:16,y:16,text:`Score: ${s[1]}`}}),t=new M({props:{x:16,y:32,text:`Coins: ${s[2]}`}}),n=new M({props:{x:700,y:16,text:`Lives: ${s[3]}`}}),l=new M({props:{x:180,y:575,text:"Move with arrow keys, shoot with spacebar"}});let d=s[0]!=="playing"&&oe(s);return{c(){p(e.$$.fragment),i=D(),p(t.$$.fragment),a=D(),p(n.$$.fragment),r=D(),p(l.$$.fragment),o=D(),d&&d.c(),f=B()},l(u){_(e.$$.fragment,u),i=S(u),_(t.$$.fragment,u),a=S(u),_(n.$$.fragment,u),r=S(u),_(l.$$.fragment,u),o=S(u),d&&d.l(u),f=B()},m(u,h){y(e,u,h),x(u,i,h),y(t,u,h),x(u,a,h),y(n,u,h),x(u,r,h),y(l,u,h),x(u,o,h),d&&d.m(u,h),x(u,f,h),m=!0},p(u,[h]){const k={};h&2&&(k.text=`Score: ${u[1]}`),e.$set(k);const v={};h&4&&(v.text=`Coins: ${u[2]}`),t.$set(v);const b={};h&8&&(b.text=`Lives: ${u[3]}`),n.$set(b),u[0]!=="playing"?d?(d.p(u,h),h&1&&c(d,1)):(d=oe(u),d.c(),c(d,1),d.m(f.parentNode,f)):d&&(W(),g(d,1,1,()=>{d=null}),F())},i(u){m||(c(e.$$.fragment,u),c(t.$$.fragment,u),c(n.$$.fragment,u),c(l.$$.fragment,u),c(d),m=!0)},o(u){g(e.$$.fragment,u),g(t.$$.fragment,u),g(n.$$.fragment,u),g(l.$$.fragment,u),g(d),m=!1},d(u){$(e,u),u&&C(i),$(t,u),u&&C(a),$(n,u),u&&C(r),$(l,u),u&&C(o),d&&d.d(u),u&&C(f)}}}function dt(s,e,i){let t,a,n,r;return R(s,ie,l=>i(0,t=l)),R(s,U,l=>i(1,a=l)),R(s,re,l=>i(2,n=l)),R(s,K,l=>i(3,r=l)),Xe("pointerdown",()=>{t!=="playing"&&Qe()}),[t,a,n,r]}class ht extends X{constructor(e){super();N(this,e,dt,$t,Y,{})}}const bt=s=>({}),fe=s=>({slot:"loading"});function ue(s){let e,i;return e=new nt({props:{x:300,y:500}}),{c(){p(e.$$.fragment)},l(t){_(e.$$.fragment,t)},m(t,a){y(e,t,a),i=!0},i(t){i||(c(e.$$.fragment,t),i=!0)},o(t){g(e.$$.fragment,t),i=!1},d(t){$(e,t)}}}function wt(s){let e,i,t,a,n,r,l;e=new Le({}),t=new yt({});let o=s[1]>0&&ue();return r=new ht({}),{c(){p(e.$$.fragment),i=D(),p(t.$$.fragment),a=D(),o&&o.c(),n=D(),p(r.$$.fragment)},l(f){_(e.$$.fragment,f),i=S(f),_(t.$$.fragment,f),a=S(f),o&&o.l(f),n=S(f),_(r.$$.fragment,f)},m(f,m){y(e,f,m),x(f,i,m),y(t,f,m),x(f,a,m),o&&o.m(f,m),x(f,n,m),y(r,f,m),l=!0},p(f,m){f[1]>0?o?m&2&&c(o,1):(o=ue(),o.c(),c(o,1),o.m(n.parentNode,n)):o&&(W(),g(o,1,1,()=>{o=null}),F())},i(f){l||(c(e.$$.fragment,f),c(t.$$.fragment,f),c(o),c(r.$$.fragment,f),l=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(o),g(r.$$.fragment,f),l=!1},d(f){$(e,f),f&&C(i),$(t,f),f&&C(a),o&&o.d(f),f&&C(n),$(r,f)}}}function kt(s){let e,i;return e=new Be({props:{$$slots:{default:[wt]},$$scope:{ctx:s}}}),{c(){p(e.$$.fragment)},l(t){_(e.$$.fragment,t)},m(t,a){y(e,t,a),i=!0},p(t,a){const n={};a&18&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){i||(c(e.$$.fragment,t),i=!0)},o(t){g(e.$$.fragment,t),i=!1},d(t){$(e,t)}}}function xt(s){let e,i;return e=new Ie({props:{x:400,y:300,progress:s[5]}}),{c(){p(e.$$.fragment)},l(t){_(e.$$.fragment,t)},m(t,a){y(e,t,a),i=!0},p(t,a){const n={};a&32&&(n.progress=t[5]),e.$set(n)},i(t){i||(c(e.$$.fragment,t),i=!0)},o(t){g(e.$$.fragment,t),i=!1},d(t){$(e,t)}}}function Ct(s){let e;const i=s[2].default,t=Ee(i,s,s[4],fe),a=t||xt(s);return{c(){a&&a.c()},l(n){a&&a.l(n)},m(n,r){a&&a.m(n,r),e=!0},p(n,r){t?t.p&&(!e||r&16)&&Pe(t,i,n,n[4],e?Me(i,n[4],r,bt):Re(n[4]),fe):a&&a.p&&(!e||r&32)&&a.p(n,e?r:-1)},i(n){e||(c(a,n),e=!0)},o(n){g(a,n),e=!1},d(n){a&&a.d(n)}}}function vt(s){let e,i;return e=new Ye({props:{key:"main",preload:St,create:Xt,$$slots:{loading:[Ct,({progress:t})=>({5:t}),({progress:t})=>t?32:0],default:[kt,({progress:t})=>({5:t}),({progress:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){p(e.$$.fragment)},l(t){_(e.$$.fragment,t)},m(t,a){y(e,t,a),i=!0},p(t,a){const n={};a&50&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){i||(c(e.$$.fragment,t),i=!0)},o(t){g(e.$$.fragment,t),i=!1},d(t){$(e,t)}}}function Dt(s){let e,i,t;function a(r){s[3](r)}let n={width:800,height:600,physics:{default:"arcade"},scale:{mode:E.Scale.FIT,autoCenter:E.Scale.CENTER_BOTH},render:{pixelArt:!0},$$slots:{default:[vt]},$$scope:{ctx:s}};return s[0]!==void 0&&(n.instance=s[0]),e=new Ne({props:n}),T.push(()=>H(e,"instance",a)),{c(){p(e.$$.fragment)},l(r){_(e.$$.fragment,r)},m(r,l){y(e,r,l),t=!0},p(r,[l]){const o={};l&18&&(o.$$scope={dirty:l,ctx:r}),!i&&l&1&&(i=!0,o.instance=r[0],L(()=>i=!1)),e.$set(o)},i(r){t||(c(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){$(e,r)}}}function St(s){s.load.audio("audio/coin","assets/coin.mp3"),s.load.image("textures/starfield","assets/star-bg-0.png"),s.load.spritesheet("textures/coin","assets/coin.png",{frameWidth:54,frameHeight:54}),s.load.spritesheet("textures/enemy","assets/invader-gold.png",{frameWidth:79,frameHeight:66}),s.load.spritesheet("textures/enemy/particles","assets/invader-gold-particles.png",{frameWidth:3,frameHeight:3}),s.load.spritesheet("textures/explosion","assets/explode.png",{frameWidth:128,frameHeight:128}),s.load.spritesheet("textures/ufo","assets/ufo.png",{frameWidth:32,frameHeight:30}),s.load.spritesheet("textures/ufo/explosion","assets/ufo-explosion.png",{frameWidth:32,frameHeight:30}),s.load.image("textures/player","assets/ship.png"),s.load.spritesheet("textures/player/bullet","assets/sperm.png",{frameWidth:6,frameHeight:22}),s.load.image("textures/enemy/bullet","assets/enemy-bullet.png")}function Xt(s){s.anims.create({key:"anims/enemy/fly",frames:s.anims.generateFrameNumbers("textures/enemy"),frameRate:10,repeat:-1}),s.anims.create({key:"anims/enemy/explosion",frames:s.anims.generateFrameNumbers("textures/explosion"),frameRate:24}),s.anims.create({key:"anims/bullet/default",frames:s.anims.generateFrameNumbers("textures/player/bullet"),frameRate:20,repeat:-1}),s.anims.create({key:"anims/coin/default",frames:s.anims.generateFrameNumbers("textures/coin"),frameRate:20,repeat:-1}),s.anims.create({key:"anims/enemyBullet/default",frames:[{key:"textures/enemy/bullet",frame:0}],frameRate:20,repeat:-1}),s.anims.create({key:"anims/player/explosion",frames:s.anims.generateFrameNumbers("textures/explosion"),frameRate:24}),s.anims.create({key:"anims/ufo/explosion",frames:s.anims.generateFrameNumbers("textures/ufo/explosion"),frameRate:30}),s.anims.create({key:"anims/ufo/fly",frames:s.anims.generateFrameNumbers("textures/ufo"),frameRate:4,repeat:-1}),s.coinSound=s.sound.add("audio/coin")}function Nt(s,e,i){let t;R(s,K,o=>i(1,t=o));let{$$slots:a={},$$scope:n}=e,r;function l(o){r=o,i(0,r)}return s.$$set=o=>{"$$scope"in o&&i(4,n=o.$$scope)},s.$$.update=()=>{s.$$.dirty&1&&(window.game=r)},[r,t,a,l,n]}class Yt extends X{constructor(e){super();N(this,e,Nt,Dt,Y,{})}}new Yt({target:document.body});
